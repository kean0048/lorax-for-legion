#!/bin/sh -e
# This is the expected entry point for Cockpit CI; will be called without
# arguments but with an appropriate $TEST_OS, and optionally $TEST_SCENARIO

make vm

case "$TEST_SCENARIO" in
  images-1)
    test/check-cli TestImages.test_ext4_filesystem \
                   TestImages.test_partitioned_disk \
                   TestImages.test_tar
     ;;

  images-2)
    test/check-cli TestImages.test_live_iso \
                   TestImages.test_qcow2
    ;;

  aws|azure|openstack|vmware)
    test/check-cloud TestCloud.test_$TEST_SCENARIO
    ;;

  "")
    test/check-cli TestSanity
    ;;

  *)
    echo "Error: unknown TEST_SCENARIO: '"$TEST_SCENARIO"'"
    exit 1
    ;;
esac
