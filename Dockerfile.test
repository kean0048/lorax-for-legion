FROM centos:7

COPY epel.repo /etc/yum.repos.d/
RUN yum -y install --nogpgcheck epel-release && \
    rpm --import /etc/pki/rpm-gpg/RPM-GPG-KEY-* && \
    yum -y install \
  anaconda-tui \
  libgit2-glib \
  libselinux-python \
  make \
  pykickstart \
  python-coverage \
  python-coveralls \
  python-flask \
  python-gevent \
  python-magic \
  python-mako \
  python2-mock \
  python-nose \
  python-pocketlint \
  python-pylint \
  pyparted \
  python2-pytoml \
  python-semantic_version \
  python-sphinx \
  python-rpmfluff \
  python-librepo \
  beakerlib \
  sudo \
  tito \
  rsync \
  e2fsprogs \
  xz-lzma-compat \
  pbzip2 \
  squashfs-tools \
  qemu-img \
  which && \
  touch /.in-container
RUN useradd weldr
VOLUME /lorax-ro
VOLUME /test-results
WORKDIR /lorax-ro
